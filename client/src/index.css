@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mockup D dark-neon theme (opt-in via .theme-dark-neon on html/body) */
/* @import './styles/mockup-d-theme.css'; */
/* @import './styles/dashboard.css'; */
/* @import './styles/typography.css'; Temporarily disabled - using design-system.css values */
/* Touch-first utilities and mobile components */
/* @import './styles/touch.css'; */

/* Import design-system last so it overrides previous styles */

/* Custom base styles */
@layer base {
  :root {
    /* 4-point grid system variables */
    --spacing-unit: 0.25rem;
    --spacing-1: calc(var(--spacing-unit) * 1);
    --spacing-2: calc(var(--spacing-unit) * 2);
    --spacing-3: calc(var(--spacing-unit) * 3);
    --spacing-4: calc(var(--spacing-unit) * 4);
    --spacing-6: calc(var(--spacing-unit) * 6);
    --spacing-8: calc(var(--spacing-unit) * 8);
    --spacing-12: calc(var(--spacing-unit) * 12);
    --spacing-16: calc(var(--spacing-unit) * 16);
    --spacing-20: calc(var(--spacing-unit) * 20);
    --spacing-24: calc(var(--spacing-unit) * 24);
    
    /* Typography scale - Fixed values to match reference design exactly */
    --font-size-xs: 0.625rem;   /* 10px - reference: 0.625rem */
    --font-size-sm: 0.75rem;    /* 12px - reference: 0.75rem stat-change */
    --font-size-base: 0.875rem; /* 14px - reference: 0.875rem most text */
    --font-size-lg: 1rem;       /* 16px - reference: 1rem */
    --font-size-xl: 1.125rem;   /* 18px - reference: 1.125rem */
    --font-size-2xl: 1.25rem;   /* 20px - reference: 1.25rem stat-value */
    --font-size-3xl: 1.5rem;    /* 24px - reference: 1.5rem dashboard title */
    --font-size-4xl: 1.875rem;  /* 30px */
    
      /* Exact spacing values from design2 copy.html reference */
  --spacing-xs: 0.125rem;    /* 2px */
  --spacing-sm: 0.25rem;     /* 4px - reference: margin-bottom 0.25rem */
  --spacing-md: 0.375rem;    /* 6px */
  --spacing-lg: 0.5rem;      /* 8px */
  --spacing-xl: 0.625rem;    /* 10px - reference: 0.625rem */
  --spacing-2xl: 0.75rem;    /* 12px */
  --spacing-3xl: 0.875rem;   /* 14px - reference: 0.875rem grid gap */
  --spacing-4xl: 1rem;       /* 16px - reference: 1rem stat card padding */
  --spacing-5xl: 1.25rem;    /* 20px - reference: 1.25rem section margins */
  --spacing-6xl: 1.5rem;     /* 24px - reference: 1.5rem sidebar padding */
  --spacing-7xl: 1.75rem;    /* 28px */
  --spacing-8xl: 2rem;       /* 32px */

  /* Typography from reference design */
  --font-primary: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-size-xs: 0.625rem;   /* 10px - reference: 0.625rem */
  --font-size-sm: 0.75rem;    /* 12px - reference: 0.75rem stat-change */
  --font-size-base: 0.875rem; /* 14px - reference: 0.875rem most text */
  --font-size-lg: 1rem;       /* 16px - reference: 1rem */
  --font-size-xl: 1.125rem;   /* 18px - reference: 1.125rem */
  --font-size-2xl: 1.25rem;   /* 20px - reference: 1.25rem stat-value */
  --font-size-3xl: 1.5rem;    /* 24px - reference: 1.5rem dashboard title */

  /* Colors from template */
  --color-primary: #8b5cf6;
  --color-secondary: #06b6d4;
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-text-primary: #1e293b;
  --color-text-secondary: #64748b;
  --color-text-muted: #475569;
 
    /* Background colors */
  /* --bg-primary: rgba(255, 255, 255, 0.3);
  --bg-secondary: rgba(255, 255, 255, 0.3);
  --bg-card: var(--surface); */
  /* --bg-gradient: linear-gradient(135deg, #fbdfff 0%, #d4eeff 50%, #d1fde9 100%); */
  /* --bg-gradient: linear-gradient(45deg, rgba(65, 89, 208, 1.000) 0.000%, rgba(200, 79, 192, 1.000) 50.000%, rgba(255, 205, 112, 1.000) 100.000%); */
  /* --bg-gradient: conic-gradient(from 20deg, rgb(52, 95, 95) 0.000deg, rgb(61, 93, 54) 40.000deg, rgb(91, 53, 100) 80.000deg, rgb(119, 53, 76) 120.000deg, rgb(53, 145, 148) 160.000deg, rgb(52, 135, 174) 200.000deg, rgb(52, 185, 192) 240.000deg, rgb(52, 207, 135) 280.000deg, rgb(163, 228, 52) 320.000deg, rgb(215, 244, 51) 360.000deg); */
  /* --bg-gradient: conic-gradient(from 20deg, rgb(99, 179, 179) 0.000deg, rgb(35, 36, 59) 40.000deg, rgb(69, 37, 78) 80.000deg, rgb(92, 31, 87) 120.000deg, rgb(79, 38, 112) 160.000deg, rgb(91, 39, 115) 200.000deg, rgb(44, 150, 231) 240.000deg, rgb(113, 217, 251) 280.000deg, rgb(136, 241, 245) 320.000deg, rgb(11, 255, 206) 360.000deg); */
  /*   --bg-gradient: radial-gradient( circle 369px at -2.9% 12.9%,  rgba(247,234,163,1) 20%, rgba(236,180,238,0.56) 136.4%, rgba(163,203,247,1) 300.7% ); */
  /*   --bg-gradient: linear-gradient(135deg, rgba(0, 0, 65, 1.000) 0.000%, rgba(34, 87, 114, 1.000) 50.000%, rgba(91, 195, 154, 1.000) 100.000%); */
  --bg-gradient: linear-gradient(to top, #edf1f3 0%, #f1f5f7 100%);
  --bg-gradient-primary: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%);
  
  /* Border and effects */
  /*   --border-color: rgba(203, 213, 225, 0.3); */
  /* App-wide border color tuned for visibility on white surfaces */
/*   --border-color: rgba(16, 24, 40, 0.12);
  --border-radius-sm: 0.375rem;
  --border-radius-md: 0.5rem;
  --border-radius-lg: 0.75rem;
  --border-radius-xl: 1rem;
  --border-radius-full: 1.5rem; */
  
  /* Shadows */
/*   --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-hover: 0 12px 30px rgba(139, 92, 246, 0.12); */
  
  /* Backdrop blur */
/*   --backdrop-blur: blur(12px);
  --backdrop-blur-light: blur(8px); */

  /* Layout constants */
  --sidebar-width: 15rem;
  --header-height: 3.5rem;
  --bottom-nav-height: 68px;
  /* Dual-Ledger core tokens */
/*   --bg: #f5f7fb;
  --surface: #ffffff;
  --ink: #0b1320;
  --muted: #596174;
  --primary: #2A5CFF;
  --success: #2EAF5E;
  --warn: #FFB020;
  --danger: #E5484D;
  --card-radius: 12px;
  --shadow: 0 8px 24px rgba(16,24,40,0.08);
 */
  /* Form-specific tokens */
/*   --input-bg: var(--bg); /* Light canvas to differentiate from white card surface */
  --input-border-color: rgba(16, 24, 40, 0.14); /* Subtle but visible */
  --focus-ring: 0 0 0 3px rgba(139, 92, 246, 0.12);
  }
 
  * {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: var(
      --font-primary,
      'SF Pro Display',
      -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      'Roboto',
      'Oxygen',
      'Ubuntu',
      'Cantarell',
      'Fira Sans',
      'Droid Sans',
      'Helvetica Neue',
      sans-serif
    );
    background: var(--bg-gradient);
    background-attachment: fixed;
    color: var(--ink);
    line-height: 1.5;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  *:not(svg) {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* Focus styles for accessibility */
  *:focus-visible {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* Remove default button styles */
  button {
    font-family: inherit;
  }

  /* Improve text rendering */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.25;
  }
}

/* Custom components */
@layer components {
  /* .btn-primary {
    @apply inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;
  }
  
  .btn-secondary {
    @apply inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;
  } */
  
  .card {
    @apply rounded-lg shadow-sm border;
    border-color: var(--border-color);
    background: var(--surface);
    backdrop-filter: none;
  }
  
  .card-hover {
    @apply hover:shadow-md transition-shadow duration-200;
  }
}

/* Custom utilities */
@layer utilities {
  .text-shadow {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
  
  .backdrop-blur-sm {
    backdrop-filter: none;
  }

  .transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }

  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;
  }

  .text-responsive {
    font-size: clamp(0.875rem, 2vw, 1.125rem);
  }

  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .gradient-bg-light {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  }

  .animate-pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .animate-slide-fade-in {
    animation: slideFadeIn 0.4s ease forwards;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  @keyframes slideFadeIn {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@layer components {
  /* Chart.js custom styles */
  .chart-container {
    position: relative;
    width: 100%;
    height: clamp(260px, 42vh, 440px);
  }

  /* Loading animations */
  .loading-dots {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }

  .loading-dots div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #3b82f6;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }

  .loading-dots div:nth-child(1) {
    left: 8px;
    animation: loading-dots1 0.6s infinite;
  }

  .loading-dots div:nth-child(2) {
    left: 8px;
    animation: loading-dots2 0.6s infinite;
  }

  .loading-dots div:nth-child(3) {
    left: 32px;
    animation: loading-dots2 0.6s infinite;
  }

  .loading-dots div:nth-child(4) {
    left: 56px;
    animation: loading-dots3 0.6s infinite;
  }

  @keyframes loading-dots1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }

  @keyframes loading-dots3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }

  @keyframes loading-dots2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }

  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .btn-primary {
      @apply border-2 border-blue-700;
    }
    
    .btn-secondary {
      @apply border-2 border-gray-700;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .transition-all,
    .card-hover,
    .animate-pulse-slow {
      transition: none;
      animation: none;
    }
    .loading-dots div {
      animation: none !important;
    }
  }
}

@layer components {
  /* Layout components from template */
  .app-container {
    display: flex;
    min-height: 100vh;
  }
  
  /* Sidebar defaults for desktop */
  .sidebar {
    width: var(--sidebar-width);
    background: var(--bg-primary);
    backdrop-filter: none;
    border-right: 1px solid var(--border-color);
    padding: var(--spacing-6xl);
    position: fixed;
    height: 100vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
  }
  
  .main-content {
    flex: 1;
    margin-left: var(--sidebar-width);
    padding: 0;
  }
  
  /* No-sidebar layout overrides */
  .app-container.no-sidebar {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  .app-container.no-sidebar .main-content {
    margin-left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
  }
  
  
  /* Ensure all main content clears the fixed bottom nav */
  .app-container.no-sidebar .main-content {
    padding-bottom: calc(var(--bottom-nav-height) + 16px + env(safe-area-inset-bottom));
  }
  
  /* Top user bar and segmented controls (Mockup A alignment) */
  .header {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 50;
    background: transparent;
    border-bottom: none;
    padding: 6px 0 !important;
  }
  
  .topbar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px !important;
  }
  
  .segmented {
    display: flex;
    background: #e8ecf9;
    border-radius: 999px;
    padding: 3px;
    gap: 3px;
  }
  
  .segmented button {
    border: 0;
    background: transparent;
    padding: 5px 8px !important;
    border-radius: 999px;
    color: var(--color-text-secondary);
    font-weight: 600;
    font-size: var(--font-size-sm);
  }
  
  .segmented button[aria-selected="true"] {
    background: rgba(255, 255, 255, 0.95);
    color: var(--color-text-primary);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  }
  
  /* Constrain header width to content width */
  .header .topbar {
    max-width: 1040px;
    margin: 0 auto;
    width: 100%;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(203, 213, 225, 0.6);
    border-radius: 24px;
    padding: 12px 16px !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  /* Navbar container - modern glassmorphism design */
  .navbar-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    width: 100%;
  }

  .navbar-section {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .navbar-section-center {
    flex: 1;
    justify-content: center;
  }

  .navbar-section-right {
    justify-content: flex-end;
  }

  /* Scope Selector - Modern pill-shaped design */
  .scope-selector {
    display: flex;
    background: rgba(241, 245, 249, 0.8);
    border-radius: 9999px;
    padding: 4px;
    gap: 4px;
    border: 1px solid rgba(203, 213, 225, 0.6);
  }

  .scope-button {
    border: 0;
    background: transparent;
    padding: 6px 12px;
    border-radius: 9999px;
    color: var(--color-text-secondary);
    font-weight: 600;
    font-size: var(--font-size-sm);
    cursor: pointer;
    transition: all 0.15s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    min-width: 64px;
    outline: none;
  }

  .scope-button-active {
    background: rgba(255, 255, 255, 0.95);
    color: var(--ink);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  }

  .scope-button-inactive:hover {
    background: rgba(255, 255, 255, 0.5);
    color: var(--ink);
  }

  .scope-button:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  .scope-button-disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .scope-label {
    font-size: var(--font-size-sm);
    font-weight: 600;
    line-height: 1;
  }

  .scope-amount {
    font-size: 0.625rem;
    color: var(--muted);
    line-height: 1;
  }

  /* Page Title */
  .page-title {
    font-size: var(--font-size-xl);
    font-weight: 700;
    color: var(--ink);
    white-space: nowrap;
    text-align: center;
  }

  /* User Menu Button */
  .user-menu-button {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(203, 213, 225, 0.6);
    border-radius: 9999px;
    padding: 4px 12px 4px 4px;
    cursor: pointer;
    transition: all 0.15s ease;
    outline: none;
    min-height: 40px;
  }

  .user-menu-button:hover {
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.12);
  }

  .user-menu-button:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* User Avatar */
  .user-avatar {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .avatar-gradient {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #8b5cf6 0%, #06b6d4 100%);
    border: 2px solid rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .avatar-initial {
    color: white;
    font-weight: 600;
    font-size: var(--font-size-sm);
    line-height: 1;
  }

  .user-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--ink);
    max-width: 140px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .chevron {
    width: 16px;
    height: 16px;
    color: var(--muted);
    transition: transform 0.15s ease;
    flex-shrink: 0;
  }

  .chevron-open {
    transform: rotate(180deg);
  }

  /* Dropdown Menu */
  .dropdown-menu {
    position: absolute;
    right: 0;
    top: calc(100% + 8px);
    width: 240px;
    background: white;
    border-radius: 24px;
    border: 1px solid rgba(203, 213, 225, 0.6);
    box-shadow: 0 8px 24px rgba(16, 24, 40, 0.12);
    padding: 8px;
    z-index: 50;
    animation: slideDown 0.15s ease;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .dropdown-header {
    padding: 12px;
    border-radius: 16px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(6, 182, 212, 0.08) 100%);
    margin-bottom: 8px;
  }

  .dropdown-name {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--ink);
    margin: 0 0 4px 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .dropdown-email {
    font-size: var(--font-size-xs);
    color: var(--muted);
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .dropdown-divider {
    height: 1px;
    background: rgba(203, 213, 225, 0.6);
    margin: 8px 4px;
  }

  .dropdown-item {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 10px 12px;
    border-radius: 12px;
    border: none;
    background: transparent;
    color: var(--ink);
    font-size: var(--font-size-sm);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;
  }

  .dropdown-item:hover {
    background: rgba(241, 245, 249, 0.8);
  }

  .dropdown-item-danger {
    color: var(--danger);
  }

  .dropdown-item-danger:hover {
    background: rgba(239, 68, 68, 0.08);
  }

  .dropdown-icon {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
  }

  /* Mobile Scope Menu */
  .mobile-scope-menu {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(203, 213, 225, 0.6);
    border-radius: 24px;
    padding: 16px;
    animation: slideDown 0.15s ease;
  }

  .mobile-scope-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .mobile-scope-label {
    font-size: var(--font-size-sm);
    color: var(--muted);
    margin: 0;
  }

  .mobile-scope-value {
    font-weight: 600;
    color: var(--ink);
  }

  .mobile-scope-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .mobile-scope-button {
    padding: 8px 16px;
    border-radius: 9999px;
    border: 1px solid;
    font-size: var(--font-size-sm);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s ease;
    outline: none;
  }

  .mobile-scope-button-active {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: white;
  }

  .mobile-scope-button-inactive {
    background: rgba(241, 245, 249, 0.8);
    border-color: rgba(203, 213, 225, 0.6);
    color: var(--ink);
  }

  .mobile-scope-button-inactive:hover {
    background: rgba(226, 232, 240, 0.8);
  }

  .mobile-scope-button-disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Mobile responsive adjustments */
  @media (max-width: 768px) {
    .navbar-container {
      gap: 12px;
    }

    .page-title {
      font-size: var(--font-size-lg);
      font-weight: 600;
    }

    .scope-selector {
      gap: 3px;
    }

    .scope-button {
      padding: 5px 10px;
      min-width: 56px;
    }

    .scope-label {
      font-size: 0.688rem;
    }

    .scope-amount {
      font-size: 0.563rem;
    }

    .user-name {
      max-width: 100px;
    }
  }

  @media (max-width: 640px) {
    .page-title {
      display: none;
    }

    .scope-selector {
      display: none;
    }

    .navbar-section-right {
      width: 100%;
      justify-content: center;
    }
  }
  
  /* Bottom Navigation Bar - Financial Check-up UI Style */
  .bottom-nav-container {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 16px;
    display: flex;
    justify-content: center;
    z-index: 50;
    animation: slideUp 400ms ease-out;
  }
  
  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .bottom-nav-inner {
    width: 100%;
    max-width: 1040px;
    height: 68px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid #e2e8f0;
    border-radius: 24px;
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.06);
    margin: 0 16px;
    display: flex;
    align-items: center;
    justify-content: space-around;
    padding: 0 20px;
    gap: 4px;
  }
  
  .bottom-nav-item {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    height: 44px;
    border-radius: 12px;
    text-decoration: none;
    color: #64748b;
    font-size: 11px;
    font-weight: 500;
    transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    border: none;
    background: transparent;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    position: relative;
    overflow: hidden;
    animation: slideUp 400ms ease-out backwards;
  }
  
  .bottom-nav-item:nth-child(1) { animation-delay: 50ms; }
  .bottom-nav-item:nth-child(2) { animation-delay: 100ms; }
  .bottom-nav-item:nth-child(3) { animation-delay: 150ms; }
  .bottom-nav-item:nth-child(4) { animation-delay: 200ms; }
  .bottom-nav-item:nth-child(5) { animation-delay: 250ms; }
  .bottom-nav-item:nth-child(6) { animation-delay: 300ms; }
  
  .bottom-nav-item:hover {
    background: #f8fafc;
    transform: translateY(-1px);
  }
  
  .bottom-nav-item:active {
    transform: scale(0.96);
    transition: transform 100ms;
  }
  
  .bottom-nav-item.bottom-nav-active {
    color: #10b981;
    background: #ecfdf5;
    font-weight: 600;
  }
  
  .bottom-nav-item.bottom-nav-primary {
    background: #10b981;
    color: white;
    font-weight: 600;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
  }
  
  .bottom-nav-item.bottom-nav-primary:hover {
    background: #059669;
    transform: scale(1.08) translateY(-1px);
    box-shadow: 0 6px 20px rgba(16, 185, 129, 0.35);
  }
  
  .bottom-nav-icon-wrap {
    display: grid;
    place-items: center;
    position: relative;
  }
  
  .bottom-nav-icon {
    width: 20px;
    height: 20px;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .bottom-nav-item:hover .bottom-nav-icon {
    transform: scale(1.05);
  }
  
  .bottom-nav-item.bottom-nav-primary .bottom-nav-icon {
    width: 22px;
    height: 22px;
  }
  
  .bottom-nav-label {
    font-size: 11px;
    font-weight: 500;
    transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
    letter-spacing: 0.025em;
  }
  
  .bottom-nav-item.bottom-nav-active .bottom-nav-label {
    font-weight: 600;
  }
  
  /* Subtle ripple effect */
  .bottom-nav-item::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(16, 185, 129, 0.1);
    transform: translate(-50%, -50%);
    transition: width 0.3s, height 0.3s;
  }
  
  .bottom-nav-item:active::after {
    width: 80px;
    height: 80px;
  }
  
  /* Responsive adjustments */
  @media (max-width: 480px) {
    .bottom-nav-inner {
      margin: 0 12px;
      height: 60px;
      padding: 0 16px;
    }
    
    .bottom-nav-item {
      height: 40px;
      gap: 1px;
    }
    
    .bottom-nav-label {
      font-size: 10px;
    }
  }
  
  /* Hide labels on very small screens */
  @media (max-width: 360px) {
    .bottom-nav-label {
      display: none;
    }
    
    .bottom-nav-icon {
      width: 22px;
      height: 22px;
    }
    
    .bottom-nav-item.bottom-nav-primary .bottom-nav-icon {
      width: 24px;
      height: 24px;
    }
  }
  
  /* Safe area support */
  @supports (padding: max(0px)) {
    .bottom-nav-inner { 
      padding-top: max(12px, env(safe-area-inset-bottom));
      padding-bottom: max(12px, env(safe-area-inset-bottom));
      height: auto;
      min-height: 68px;
    }
  }
  
  @supports (padding: max(0px)) {
    @media (max-width: 480px) {
      .bottom-nav-inner { 
        padding-top: max(10px, env(safe-area-inset-bottom));
        padding-bottom: max(10px, env(safe-area-inset-bottom));
        min-height: 60px;
      }
    }
  }
  
  /* Mobile breakpoint adjustments:
     - Hide fixed sidebar
     - Remove left margin from main-content so content spans full width */
  @media (max-width: 768px) {
    .sidebar {
      display: none;
    }
    .main-content {
      margin-left: 0;
    }
  }
  
  /* Navigation styling */
  .nav-item {
    display: flex;
    align-items: center;
    padding: var(--spacing-xl) var(--spacing-3xl);
    margin-bottom: var(--spacing-xs);
    border-radius: var(--border-radius-sm);
    color: var(--color-text-secondary);
    text-decoration: none;
    transition: all 0.3s ease;
    font-weight: 500;
    font-size: var(--font-size-base);
  }
  
  .nav-item:hover {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(6, 182, 212, 0.08) 100%);
    color: var(--color-primary);
    transform: translateX(2px);
  }
  
  .nav-item.active {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(6, 182, 212, 0.15) 100%);
    color: var(--color-primary);
    font-weight: 600;
  }
  
  /* Card components */
  .card {
    background: var(--surface);
    border-radius: var(--card-radius);
    padding: var(--spacing-2xl);
    /* box-shadow: var(--shadow); */
    border: 1px solid var(--border-color);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    transition: all 0.3s ease;
  }
  
  /* Ensure card visuals override Tailwind utilities by upping specificity */
  .card.card,
  [data-slot="card"] {
    background: var(--surface);
    border: 1px solid var(--border-color);
    border-radius: var(--card-radius);
  }
  
  .card:hover {
    transform: translateY(-2px);
    /* box-shadow: 0 12px 28px rgba(16,24,40,0.12); */
  }
  
  .stat-card {
    background: var(--surface);
    border-radius: var(--card-radius);
    padding: var(--spacing-4xl);
    /* box-shadow: var(--shadow); */
    border: none;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    transition: all 0.3s ease;
  }
  
  .stat-card:hover {
    transform: translateY(-2px);
    /* box-shadow: 0 12px 28px rgba(16,24,40,0.12); */
  }
  
  /* Button components */
  .btn {
    padding: var(--spacing-md) var(--spacing-3xl);
    border-radius: var(--border-radius-sm);
    font-weight: 500;
    font-size: var(--font-size-base);
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-md);
  }
  
  /* .btn-secondary {
    background: var(--bg-card);
    color: var(--color-text-muted);
    border: 1px solid var(--border-color);
    backdrop-filter: none;
  } */
  
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    background: var(--secondary-gradient);
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .btn-secondary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-lg);
  }
  
  .btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.15);
  }
  
  /* Grid layouts */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: var(--spacing-2xl);
    margin-bottom: var(--spacing-4xl);
  }
  
  .analytics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
    gap: var(--spacing-2xl);
    margin-bottom: var(--spacing-4xl);
    /* Ensure analytics grid items have proper height for flexbox children */
    grid-auto-rows: minmax(380px, auto);
  }
  
  /* Force exactly two columns at md+ breakpoints regardless of container width */
  .two-col-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
  @media (min-width: 768px) {
    .two-col-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
  
  /* Typography */
  .dashboard-title {
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: var(--ink);
    margin-bottom: var(--spacing-xs);
  }
  
  .section-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--ink);
    margin: 0 0 var(--spacing-xl) 0;
  }
  
  /* Title spacing inside cards */
  .card .section-title {
    margin-top: var(--spacing-xs);
    margin-bottom: var(--spacing-xl);
  }
  
  /* Improve separation for nested cards (card-inside-card) */
  .card .card {
    background: var(--surface);
    border: 1px solid var(--border-color);
    margin-top: var(--spacing-2xl);
  }
  
  /* Align header/footer gutters with card content */
  .card [data-slot="card-header"],
  .card [data-slot="card-footer"] {
    padding-left: 0;
    padding-right: 0;
  }
  
  .stat-title {
    font-size: var(--font-size-base);
    color: var(--muted);
    font-weight: 500;
  }
  
  .stat-value {
    font-size: var(--font-size-2xl);
    font-weight: 700;
    color: var(--ink);
    margin-bottom: var(--spacing-sm);
  }
  
  /* KPI icon container and trend colors */
  .stat-icon {
    display: grid;
    place-items: center;
    width: 28px;
    height: 28px;
    border-radius: 8px;
    background: var(--bg);
    color: var(--muted);
  }
  .kpi-up { color: var(--danger); }
  .kpi-down { color: var(--success); }
  .kpi-neutral { color: var(--muted); }
  
  /* Badge components */
  .badge {
    padding: var(--spacing-xs) var(--spacing-lg);
    border-radius: var(--spacing-4xl);
    font-size: var(--font-size-sm);
    font-weight: 500;
    background: var(--surface);
    color: var(--ink);
    border: none;
  }
  
  .text-muted { color: var(--muted); }
  
  /* Token-based text and bg utilities */
  .text-success { color: var(--success); }
  .text-warn { color: var(--warn); }
  .text-danger { color: var(--danger); }
  .bg-success { background: var(--success); }
  .bg-warn { background: var(--warn); }
  .bg-danger { background: var(--danger); }
  
  /* Progress bar tokens */
  .progress-track { background: rgba(16,24,40,0.10); }
  .progress-fill { height: 8px; border-radius: 9999px; transition: width 0.3s ease; }
  
  /* Table styling */
  .table-card {
    background: var(--surface);
    border-radius: var(--card-radius);
    border: none;
    box-shadow: var(--shadow);
    overflow: hidden;
  }
  
  .table-header {
    background: var(--bg);
    padding: var(--spacing-3xl) var(--spacing-4xl);
    border-bottom: 1px solid rgba(16,24,40,0.06);
  }
  
  /* Chart containers */
  .chart-card {
    background: var(--surface);
    border-radius: var(--card-radius);
    padding: var(--spacing-4xl);
    border: none;
    /* box-shadow: var(--shadow); */
    transition: all 0.3s ease;
  }
  
  .chart-card:hover {
    transform: translateY(-1px);
    /* box-shadow: 0 12px 28px rgba(16,24,40,0.12);*/
  }
  
  /* Additional component styles */
  .logo {
    font-size: var(--font-size-lg);
    font-weight: 600;
    background: var(--bg-gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: var(--spacing-8xl);
    text-align: left;
  }
  
  
  
  
  
  /* Dashboard specific components */
  .dashboard-content {
    width: 100%;
    max-width: 1040px;
    padding: var(--spacing-lg) var(--spacing-xl);
    margin: 0 auto;
  }
  
  /* Compact padding for dashboard cards */
  .dashboard-content .stat-card,
  .dashboard-content .chart-card {
    padding: var(--spacing-2xl);
  }
  
  /* Compact KPI cards in stats grid (override Tailwind paddings) */
  .stats-grid .stat-card-shadcn {
    padding: 6px 12px !important;
  }
  .stats-grid .stat-title {
    font-size: var(--font-size-sm);
  }
  .stats-grid .stat-value {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-2xs);
  }
  .stats-grid .stat-change {
    font-size: var(--font-size-xs);
  }
  .stats-grid .stat-icon {
    width: 20px;
    height: 20px;
  }
  .stats-grid .stat-header {
    margin-bottom: var(--spacing-sm);
  }
  
  /* Compact info badges/cards used inside analytics components */
  .analytics-grid .stat-card-shadcn {
    padding: 6px 10px !important;
  }
  .analytics-grid .stat-card-shadcn .stat-title {
    font-size: var(--font-size-sm);
  }
  .analytics-grid .stat-card-shadcn .stat-value {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-xs);
  }
  .analytics-grid .stat-card-shadcn .stat-header {
    margin-bottom: var(--spacing-xs);
  }
  
  /* Override common Tailwind paddings inside stat cards */
  .stat-card-shadcn .p-4, .stat-card-shadcn.p-4 { padding: 8px !important; }
  .stat-card-shadcn .p-3, .stat-card-shadcn.p-3 { padding: 6px !important; }
  .stat-card-shadcn .px-4, .stat-card-shadcn.px-4 { padding-left: 12px !important; padding-right: 12px !important; }
  .stat-card-shadcn .py-2, .stat-card-shadcn.py-2 { padding-top: 6px !important; padding-bottom: 6px !important; }
  
  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-3xl);
  }
  
  .dashboard-header-left {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: var(--spacing-lg);
  }
  
  .dashboard-subtitle {
    color: var(--color-text-secondary);
    font-size: var(--font-size-base);
    margin: 0;
  }
  
  .dashboard-actions {
    display: flex;
    gap: var(--spacing-lg);
  }
  
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-xl);
  }
  
  .analytics-section {
    margin-bottom: var(--spacing-2xl);
  }
  
  /* Stat card specific styling */
  .stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);
  }
  
  .stat-icon {
    width: var(--spacing-7xl);
    height: var(--spacing-7xl);
    border-radius: var(--border-radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-base);
  }
  
  .stat-change {
    font-size: var(--font-size-sm);
    font-weight: 500;
  }
  
  .form-select {
    width: 100%;
    padding: var(--spacing-2xl) var(--spacing-3xl);
    border: 1px solid var(--input-border-color);
    border-radius: var(--border-radius-sm);
    background: var(--input-bg);
    backdrop-filter: none;
    color: var(--color-text-primary);
    font-size: var(--font-size-base);
    cursor: pointer;
  }
  
  .form-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: var(--focus-ring);
  }
  
  .time-filter {
    padding: var(--spacing-md) var(--spacing-xl);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-sm);
    background: var(--bg-card);
    backdrop-filter: none;
    color: var(--color-text-primary);
    font-size: var(--font-size-base);
  }
  
  /* Button variants */
  .btn-primary {
    background: var(--bg-gradient-primary);
    color: #ffffff;
    border: none;
  }
  
  .btn-primary:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.25);
  }
  
  .btn-ghost {
    background: transparent;
    color: var(--color-text-secondary);
    border: 1px solid var(--border-color);
  }
  
  .btn-ghost:hover {
    background: var(--bg-card);
    color: var(--color-text-primary);
  }
  
  /* Table enhancements */
  .table {
    width: 100%;
    border-collapse: collapse;
  }
  
  .table th {
    background: var(--bg);
    padding: var(--spacing-xl) var(--spacing-3xl);
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.025em;
    text-align: left;
  }
  
  .table td {
    padding: var(--spacing-2xl) var(--spacing-3xl);
    font-size: var(--font-size-base);
    color: var(--color-text-primary);
    border-bottom: 1px solid var(--border-color);
  }
  
  .table tr:last-child td {
    border-bottom: none;
  }
  
  /* Additional table classes for MonthlyBreakdownTable */
  .table-container {
    overflow-x: auto;
    border-radius: var(--border-radius-sm);
  }
  
  .data-table {
    min-width: 100%;
    border-collapse: collapse;
  }
  
  .table-header {
    background: var(--bg);
    border-bottom: 1px solid var(--border-color);
  }
  
  .table-header-cell {
    padding: var(--spacing-2xl) var(--spacing-3xl);
    text-align: left;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .table-body {
    background: var(--bg-card);
    backdrop-filter: none;
  }
  
  .table-row {
    border-bottom: 1px solid var(--border-color);
    transition: all 0.3s ease;
  }
  
  .table-row:hover {
    background: var(--bg);
    transform: translateY(-1px);
  }
  
  .table-row:last-child {
    border-bottom: none;
  }
  
  .table-cell {
    padding: var(--spacing-2xl) var(--spacing-3xl);
    font-size: var(--font-size-base);
    color: var(--color-text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 120px;
  }
  
  .table-cell-primary {
    font-weight: 600;
    color: var(--color-text-primary);
  }
  
  /* Status badges for table */
  .status-badge {
    display: inline-flex;
    align-items: center;
    padding: var(--spacing-xs) var(--spacing-lg);
    border-radius: var(--border-radius-full);
    font-size: var(--font-size-xs);
    font-weight: 600;
    border: none;
    background: var(--surface);
    color: var(--ink);
    transition: all 0.2s ease;
  }
  
  .status-success {
    background: rgba(46, 175, 94, 0.12);
    color: var(--success);
  }
  
  .status-error {
    background: rgba(229, 72, 77, 0.12);
    color: var(--danger);
  }
  
  .status-warning {
    background: rgba(255, 176, 32, 0.14);
    color: var(--warn);
  }
  
  .status-dot { width: 8px; height: 8px; border-radius: 9999px; }
  .status-dot.success { background: var(--success); }
  .status-dot.warning { background: var(--warn); }
  .status-dot.error { background: var(--danger); }
  
  /* KPI trend label color */
  .stat-change { display: inline-flex; align-items: center; gap: var(--spacing-xs); color: var(--muted); }
  .stat-change.up { color: var(--danger); }
  .stat-change.down { color: var(--success); }
  .stat-change.neutral { color: var(--muted); }
  
  /* Banners */
  .banner { display: flex; gap: var(--spacing-md); padding: var(--spacing-lg) var(--spacing-xl); border-radius: 8px; background: var(--bg); color: var(--ink); align-items: flex-start; }
  .banner .icon { width: 20px; height: 20px; margin-top: 2px; }
  .banner-danger { border-left: 4px solid var(--danger); }
  
  .status-text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 150px;
  }
  
  /* Chart specific styling */
  .chart-header {
    margin-bottom: var(--spacing-2xl);
  }
  
  .chart-title {
    font-size: var(--font-size-base);
    font-weight: 600;
    color: var(--color-text-primary);
    margin-bottom: var(--spacing-xs);
  }
  
  .chart-subtitle {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }
  
  /* .chart-container sizing moved to index.css to avoid duplicate rules */
  
  /* Loading states */
  .loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-8xl) var(--spacing-4xl);
  }
  
  .loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid var(--border-color);
    border-radius: 50%;
    border-top-color: var(--color-primary);
    animation: spin 1s ease-in-out infinite;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  
  /* Error states */
  .error-message {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(248, 113, 113, 0.1) 100%);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: var(--border-radius-md);
    padding: var(--spacing-4xl);
    color: #991b1b;
    font-size: var(--font-size-base);
  }
  
  /* Progress components */
  .progress-bar {
    width: 100%;
    height: var(--spacing-lg);
    background: rgba(203, 213, 225, 0.3);
    border-radius: var(--border-radius-sm);
    overflow: hidden;
  }
  
  .progress-fill {
    height: 100%;
    background: var(--bg-gradient-primary);
    transition: width 0.3s ease;
  }
  
  /* Modal and overlay styling */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: none;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
  }
  
  .modal-content {
    /* Ensure modal content has a solid fallback so dialogs remain opaque
       even if --bg-card isn't defined elsewhere. */
    background: var(--bg-card, #ffffff);
    backdrop-filter: none;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    padding: var(--spacing-6xl);
    max-width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
  }
  
  /* Utility classes */
  .text-gradient {
    background: var(--bg-gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .glass-effect {
    background: var(--bg-card);
    backdrop-filter: none;
    border: 1px solid var(--border-color);
  }
  
  .hover-lift {
    transition: all 0.3s ease;
  }
  
  .hover-lift:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-hover);
  }
  
  /* Tone accents for cards */
  .card-tone-success { border-left: 4px solid var(--success); }
  .card-tone-warning { border-left: 4px solid var(--warn); }
  .card-tone-danger { border-left: 4px solid var(--danger); }
  
  /* Accessibility utilities */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }
  
  /* Form layout utilities */
  .form-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--spacing-3xl);
  }
  
  .filters-grid {
    display: grid;
    gap: var(--spacing-3xl);
  }
  
  @media (min-width: 768px) {
    .filters-grid {
      grid-template-columns: repeat(3, 1fr);
      align-items: end;
    }
  }
  
  .form-field {
    display: flex;
    flex-direction: column;
  }
  .form-actions {
    display: inline-flex;
    align-items: center;
    justify-content: end;
    gap: var(--spacing-xl);
  }
  
  /* Filters card specific adjustments to avoid edge-to-edge content */
  .filters-card {
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
  }
  .filters-card [data-slot="card-header"],
  .filters-card [data-slot="card-content"],
  .filters-card [data-slot="card-footer"] {
    padding-left: var(--spacing-lg) !important;
    padding-right: var(--spacing-lg) !important;
    /* align vertical gutters */
    padding-top: var(--spacing-lg) !important;
    padding-bottom: var(--spacing-lg) !important;
  }
  @media (max-width: 768px) {
    .filters-card [data-slot="card-header"],
    .filters-card [data-slot="card-content"],
    .filters-card [data-slot="card-footer"] {
      padding-left: var(--spacing-md) !important;
      padding-right: var(--spacing-md) !important;
      padding-top: var(--spacing-md) !important;
      padding-bottom: var(--spacing-md) !important;
    }
  }
  
  /* Recurring bills card — mirror Filters spacing and width constraints */
  .recurring-bills-card {
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
  }
  .recurring-bills-card [data-slot="card-header"],
  .recurring-bills-card [data-slot="card-content"],
  .recurring-bills-card [data-slot="card-footer"] {
    padding-left: var(--spacing-lg) !important;
    padding-right: var(--spacing-lg) !important;
    /* align vertical gutters */
    padding-top: var(--spacing-lg) !important;
    padding-bottom: var(--spacing-lg) !important;
  }
  @media (max-width: 768px) {
    .recurring-bills-card [data-slot="card-header"],
    .recurring-bills-card [data-slot="card-content"],
    .recurring-bills-card [data-slot="card-footer"] {
      padding-left: var(--spacing-md) !important;
      padding-right: var(--spacing-md) !important;
      padding-top: var(--spacing-md) !important;
      padding-bottom: var(--spacing-md) !important;
    }
  }
  
  /* Expenses table card — mirror Filters spacing and width constraints */
  .expenses-card {
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
  }
  .expenses-card [data-slot="card-header"],
  .expenses-card [data-slot="card-content"],
  .expenses-card [data-slot="card-footer"] {
    padding-left: var(--spacing-lg) !important;
    padding-right: var(--spacing-lg) !important;
    padding-top: var(--spacing-lg) !important;
    padding-bottom: var(--spacing-lg) !important;
  }
  @media (max-width: 768px) {
    .expenses-card [data-slot="card-header"],
    .expenses-card [data-slot="card-content"],
    .expenses-card [data-slot="card-footer"] {
      padding-left: var(--spacing-md) !important;
      padding-right: var(--spacing-md) !important;
      padding-top: var(--spacing-md) !important;
      padding-bottom: var(--spacing-md) !important;
    }
  }
  
  /* Responsive design */
  @media (max-width: 768px) {
    .sidebar {
      width: 100%;
      position: relative;
      height: auto;
    }
    
    .main-content {
      margin-left: 0;
      margin-top: 0;
    }
    
    .stats-grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-2xl);
    }
    
    .analytics-grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-2xl);
      grid-auto-rows: auto;
    }
    
    .dashboard-content {
      padding: var(--spacing-2xl);
    }
    
    .header {
      position: sticky;
      top: 0;
      left: 0;
      width: 100%;
      padding: var(--spacing-3xl) var(--spacing-4xl);
    }
    
    .sidebar {
      padding: var(--spacing-4xl);
    }
  
    /* Tone down heavy glass/blur on small screens for performance */
    .glassmorphism-card {
      background: rgba(255, 255, 255, 0.28) !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  
    .stat-card-shadcn {
      background: rgba(255, 255, 255, 0.22) !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  }
  
  @media (max-width: 480px) {
    .stats-grid {
      gap: var(--spacing-2xl);
    }
    
    .dashboard-content {
      padding: var(--spacing-2xl);
    }
    
    .header {
      padding: var(--spacing-2xl) var(--spacing-3xl);
    }
    
    .header-actions {
      gap: var(--spacing-2xl);
    }
    
    .user-info span {
      display: none;
    }
  }
  
  /* SavingsRateTracker shadcn/ui glassmorphism styling */
  .glassmorphism-card {
    background: rgba(255, 255, 255, 0.33) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    border-radius: 20px !important;
    box-shadow: 
      4px 4px 8px rgba(0, 0, 0, 0.1),
      inset 1px 1px 2px rgba(255, 255, 255, 0.5) !important;
    position: relative;
  }
  
  .glassmorphism-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    border-radius: 20px 20px 0 0;
  }
  
  .glassmorphism-card::after {
    content: '';
    position: absolute;
    top: 1px;
    left: 1px;
    right: 1px;
    bottom: 1px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
    border-radius: 19px;
    pointer-events: none;
  }
  
  .stat-card-shadcn {
    background: rgba(255, 255, 255, 0.25) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 16px !important;
    box-shadow: 
      2px 2px 6px rgba(0, 0, 0, 0.08),
      inset 1px 1px 1px rgba(255, 255, 255, 0.3) !important;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .stat-card-shadcn:hover {
    transform: translateY(-2px);
    box-shadow: 
      4px 4px 12px rgba(0, 0, 0, 0.12),
      inset 1px 1px 2px rgba(255, 255, 255, 0.4) !important;
  }
  
  .stat-card-shadcn::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    border-radius: 16px 16px 0 0;
  }
  
  /* Enhanced loading and error states for glassmorphism */
  .glassmorphism-card .loading-container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    margin: var(--spacing-4xl);
  }
  
  .glassmorphism-card .error-message {
    background: rgba(239, 68, 68, 0.1) !important;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border: 1px solid rgba(239, 68, 68, 0.2) !important;
    border-radius: 12px !important;
    margin: var(--spacing-4xl);
  }
  
  /* Button styling for glassmorphism context */
  .glassmorphism-card .btn {
    background: rgba(138, 92, 246, 0.325) !important;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border: 1px solid rgba(139, 92, 246, 0.3);
    color: white;
    padding: var(--spacing-2xl) var(--spacing-4xl);
    border-radius: 8px;
    font-weight: 500;
    transition: all 0.3s ease;
    cursor: pointer;
  }
  
  .glassmorphism-card .btn:hover {
    background: rgba(138, 92, 246, 0.411) !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(139, 92, 246, 0.3);
  }
  
  @media (prefers-reduced-motion: reduce) {
    .hover-lift,
    .card,
    .stat-card,
    .chart-card,
    .btn {
      transition: none !important;
    }
    .card:hover,
    .stat-card:hover,
    .chart-card:hover,
    .btn:hover,
    .hover-lift:hover {
      transform: none !important;
      box-shadow: none !important;
    }
  }
}
